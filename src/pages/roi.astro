---
import Layout from '../layouts/Layout.astro';

// --- ÁREA DE EDIÇÃO DOS DADOS ---
// Para adicionar um novo mês, adicione uma nova coluna aqui nos dados.
const headers = ["Métricas", "Julho", "Agosto", "Setembro", "Outubro", "Novembro"];

const dados = [
    { label: "Investimento", val: ["R$ 5.060,60", "R$ 3.941,54", "R$ 4.245,38", "R$ 3.655,74", "R$ 3.291,50"] },
    { label: "Leads", val: ["400", "742", "1.148", "579", "353"] },
    { label: "Custo por Lead", val: ["R$ 12,65", "R$ 5,31", "R$ 3,70", "R$ 6,31", "R$ 9,32"] },
    { label: "% de MQL", val: ["11,00%", "4,85%", "0,78%", "2,25%", "1,42%"] },
    { label: "MQL", val: ["44", "36", "9", "13", "5"] },
    { label: "Custo por MQL", val: ["R$ 115,01", "R$ 109,49", "R$ 471,71", "R$ 281,21", "R$ 658,30"] },
    { label: "Conv. Lead p/ Venda", val: ["1,50%", "0,40%", "0,35%", "1,04%", "1,42%"] },
    { label: "Conv. MQL p/ Venda", val: ["13,64%", "8,33%", "44,44%", "46,15%", "100,00%"] },
    { label: "Vendas", val: ["6", "3", "4", "6", "5"] },
    { label: "Custo por Venda", val: ["R$ 843,43", "R$ 1.313,85", "R$ 1.061,35", "R$ 609,29", "-"] },
    { label: "Ticket Médio", val: ["R$ 3.663,75", "R$ 14.219,00", "R$ 9.579,00", "R$ 4.684,08", "R$ 10.091,37"] },
    
    // Destaque para Faturamento e ROAS
    { label: "Faturamento Total", isBold: true, val: ["R$ 21.982,49", "R$ 42.657,00", "R$ 38.316,00", "R$ 28.104,47", "R$ 50.456,84"] },
    { label: "ROAS (Total)", isBold: true, isGreen: true, val: ["4,34", "10,82", "9,03", "7,69", "15,33"] },
    
    // Espaço em branco ou separador
    { separator: true },

    { label: "LTV + 3 Compras (Est.)", val: ["R$ 65.947,47", "R$ 127.971,00", "R$ 124.527,00", "R$ 84.313,41", "R$ 141.279,15"] },
    { label: "ROAS LTV 3", isBold: true, val: ["13,03", "32,47", "29,33", "23,06", "42,92"] },
];
---

<Layout title="Retorno Sobre Investimento">
    <div class="mb-8">
        <h2 class="text-3xl font-bold text-gray-800">Retorno Sobre Investimento (ROI)</h2>
        <p class="text-gray-500 text-sm">Acompanhamento mensal de performance de mídia paga.</p>
    </div>

    <div class="bg-white shadow-lg rounded-xl overflow-hidden border border-gray-200">
        <div class="overflow-x-auto">
            <table class="min-w-full text-sm text-left">
                <thead class="bg-blue-600 text-white font-bold uppercase text-xs">
                    <tr>
                        {headers.map((header, index) => (
                            <th class={`px-6 py-4 whitespace-nowrap ${index === 0 ? 'sticky left-0 z-10 bg-blue-700 w-48' : ''}`}>
                                {header}
                            </th>
                        ))}
                    </tr>
                </thead>
                
                <tbody class="divide-y divide-gray-100">
                    {dados.map((row) => (
                        row.separator ? (
                            <tr class="bg-gray-50"><td colspan={headers.length} class="py-2"></td></tr>
                        ) : (
                            <tr class="hover:bg-blue-50 transition group">
                                <td class={`px-6 py-3 whitespace-nowrap sticky left-0 z-10 bg-white group-hover:bg-blue-50 border-r border-gray-100
                                    ${row.isBold ? 'font-black text-gray-900' : 'font-medium text-gray-600'}`}>
                                    {row.label}
                                </td>
                                
                                {row.val.map(valor => (
                                    <td class={`px-6 py-3 whitespace-nowrap text-right font-mono
                                        ${row.isBold ? 'font-bold' : ''}
                                        ${row.isGreen ? 'text-green-600 bg-green-50' : 'text-gray-700'}
                                    `}>
                                        {valor}
                                    </td>
                                ))}
                            </tr>
                        )
                    ))}
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4">
        <div class="flex">
            <div class="ml-3">
                <p class="text-sm text-yellow-700">
                    <strong>Nota:</strong> Dados atualizados manualmente com base no fechamento mensal de tráfego pago.
                </p>
            </div>
        </div>
    </div>
</Layout>